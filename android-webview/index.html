<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Android WebView - techStop</title>
  <meta name="author" content="Antonio">
  <meta name="description" content="In this tutorial you will learn how to create an Android webview in your app. You can use the webview to render web pages and also interact with the pages. This webview will also allow you to download from links across the web.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif&family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://techstop.github.io/css/styles.css">
  <link rel="stylesheet" href="https://techstop.github.io/css/syntax.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link href="https://techstop.github.io/post/index.xml" rel="alternate" type="application/rss+xml" title="techStop" />
  <link href="https://techstop.github.io/post/index.xml" rel="feed" type="application/rss+xml" title="techStop" />
  <link rel="icon" href="https://techstop.github.io/img/favicon.ico">
  <link rel="apple-touch-icon" href="https://techstop.github.io/img/apple-touch-icon.png" />
  
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-114983197-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-114983197-2');
</script>

  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-8645513020646755",
          enable_page_level_ads: true
     });
</script>
<script data-ad-client="ca-pub-8645513020646755" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>
<body>
    <header class="site-header">
  <style>
    .site-header h2 .logo {
    background: url(https://techstop.github.io/) no-repeat 0 0;
    }
    @media (min--moz-device-pixel-ratio: 1.3), (-o-min-device-pixel-ratio: 2.6 / 2), (-webkit-min-device-pixel-ratio: 1.3), (min-device-pixel-ratio: 1.3), (min-resolution: 1.3dppx) {
      .site-header h2 .logo {
        background-image: url(https://techstop.github.io/);
    } }
    .site-header {
      background: #2a373d url(https://techstop.github.io/) no-repeat center center;
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
    }
  </style>
  <script>
    window.onscroll = function() {scrollFunction()};
    function scrollFunction() {
      if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
        document.getElementById("myBtn").style.display = "block";
      } else {
        document.getElementById("myBtn").style.display = "none";
      }
    }
    function topFunction() {
      $(document.documentElement).animate({ scrollTop: 0 }, 'slow');
      $(document.body).animate({ scrollTop: 0 }, 'slow');
    }
  </script>

  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js"></script>
<script>
window.addEventListener("load", function(){
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "var(--cookie-bg)",
      "text": "var(--cookie-font)"
    },
    "button": {
      "background": "var(--color-primary)",
      "hover": "var(--color-secondary)"
    }
  },
  "theme": "classic",
  "position": "bottom-left",
  "content": {
    "dismiss": "Close"
  }
})});
</script>

  
  <button onclick="topFunction()" id="myBtn" title="Back to top">&#8682;</button>
</header>
<nav class="navbar">
  <label class="navbar-toggle" id="js-navbar-toggle" for="chkToggle">
    <i class="fa fa-bars"></i>
  </label>
    <a href="https://techstop.github.io/" class="logo">techStop</a>
  <input type="checkbox" id="chkToggle"></input>
  <ul class="main-nav" id="js-menu"><li>
      <a href="https://techstop.github.io/" class="nav-links">Home</a>
    </li>
    <li>
      <a href="https://techstop.github.io/categories/linux/" class="nav-links">Linux</a>
    </li>
    <li>
      <a href="https://techstop.github.io/categories/android/" class="nav-links">Android</a>
    </li>
    <li>
      <a href="https://techstop.github.io/categories/tutorials/" class="nav-links">Tutorials</a>
    </li>
    <li>
      <a href="https://techstop.github.io/blog-tags/" class="nav-links">Tags</a>
    </li>
    <li>
      <a href="https://techstop.github.io/search/" class="nav-links"><button type="submit" style="background: none; border: none; padding: 0;" title="Search"><i class="fa fa-search"></i></button></a>
    </li>
  </ul>
</nav>
<div style="float: right; margin-top: 10px; margin-right: 20px;">
<a href="//github.com/GameTheory-" id="social-icon" class="icon-github" target="_blank" title="Github"></a>
<a class="icon-rss" href="https://techstop.github.io/post/index.xml" title="RSS" target="_blank"></a>
</div>
<div class="theme-switch-wrapper">
      <label class="theme-switch" for="checkbox" title="Light Mode">
        <input type="checkbox" id="checkbox" />
        <div class="slider round"></div>
      </label>
      <label class="theme-switch-label">Light Mode</label>
    </div>
    <br>
    <div class="container clearfix">
      <main>
        <div class="content">
  <article>
    <a class="btn home" href="https://techstop.github.io/" title="Back to home">&laquo; Back to home</a>
    
  <h1><a href="https://techstop.github.io/android-webview/" title="Android WebView">Android WebView</a></h1>

<div class="post-info">Published: Feb 4, 2019 &middot; Updated: Feb 16, 2022</div>

    <p><div class="myImgContainer">
<img class="myImg" src="https://techstop.github.io/images/android-webview/android-webview-0.png" alt="Android WebView" title="Android WebView"  width="100px">
</div>

<div id="myModal" class="modal">
  <span class="close">&times;</span>
  <img class="modal-content" id="img01">
  <div id="caption"></div>
</div>

<script>
	
	var modal = document.getElementById('myModal');
	var i;
	
	var img = document.getElementsByClassName('myImg');
	var modalImg = document.getElementById("img01");
	var captionText = document.getElementById("caption");
	for(i = 0; i < img.length; i++) {
		img[i].onclick = function() {
			modal.style.display = "block";
			modalImg.src = this.src;
			captionText.innerHTML = this.alt;
		}
	}
	
	var span = document.getElementsByClassName("close")[0];

	
	span.onclick = function() { 
		modal.style.display = "none";
	}
</script>

<div class="myImgContainer">
<img class="myImg" src="https://techstop.github.io/images/android-webview/android-webview-1.png" alt="Android WebView" title="Android WebView"  width="100px">
</div>

<div id="myModal" class="modal">
  <span class="close">&times;</span>
  <img class="modal-content" id="img01">
  <div id="caption"></div>
</div>

<script>
	
	var modal = document.getElementById('myModal');
	var i;
	
	var img = document.getElementsByClassName('myImg');
	var modalImg = document.getElementById("img01");
	var captionText = document.getElementById("caption");
	for(i = 0; i < img.length; i++) {
		img[i].onclick = function() {
			modal.style.display = "block";
			modalImg.src = this.src;
			captionText.innerHTML = this.alt;
		}
	}
	
	var span = document.getElementsByClassName("close")[0];

	
	span.onclick = function() { 
		modal.style.display = "none";
	}
</script>
</p>
<p>The Android WebView allows your app to open web pages within your app. For this Android WebView example we will create an android webview app that loads a couple web pages. We will be adding some attributes like JavaScript to interact with page elements and a DownloadListener for downloading items from download links on web pages as well as a ProgressBar to show page loading progress. We will also request runtime storage write permissions for our DownloadListener for android 6+.</p>
<p>The code in this tutorial will be in the full project on github linked at the bottom of this page. Feel free to fork or download the project from github.</p>
<p><strong>Summary:</strong></p>
<ul>
<li>We will create a new class with our webview that we can pass any web page URL to.</li>
<li>In our MainActivity we create two buttons that will each pass a different web page URL to our webview.</li>
<li>In our WebView class we will add a DowloadListener, ProgressBar, and request storage write permission.</li>
</ul>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-8645513020646755"
     data-ad-slot="8847978337"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2 id="android-webview-example">Android WebView Example</h2>
<p>Begin by creating a new project in Android Studio with an Empty Activity if you haven’t already. We can call the project “WebView Example”.</p>
<p>Now create a new java class called &ldquo;MyWebView&rdquo; where we will setup our webview. I&rsquo;ve included comments in the code so that you know what each attribute and method is for.</p>
<p><strong>MyWebView.java</strong>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.webviewexample</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.Manifest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.annotation.SuppressLint</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.app.DownloadManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.content.pm.PackageManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.graphics.Bitmap</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.net.Uri</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Build</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Environment</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.view.View</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.webkit.CookieManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.webkit.URLUtil</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.webkit.WebView</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.webkit.WebViewClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.ProgressBar</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Toast</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">androidx.annotation.NonNull</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">androidx.appcompat.app.AppCompatActivity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">androidx.core.app.ActivityCompat</span><span class="o">;</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWebView</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="o">{</span>
  <span class="c1">// Declare our web view.
</span><span class="c1"></span>  <span class="kd">private</span> <span class="n">WebView</span> <span class="n">webview</span><span class="o">;</span>

  <span class="c1">// We can pass URLs from any other class to this string.
</span><span class="c1"></span>  <span class="kd">static</span> <span class="n">String</span> <span class="n">url</span><span class="o">;</span>

  <span class="c1">// Optional progress bar for page loading progress.
</span><span class="c1"></span>  <span class="kd">private</span> <span class="n">ProgressBar</span> <span class="n">progress</span><span class="o">;</span>

  <span class="c1">// A request code for our storage write request.
</span><span class="c1"></span>  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">WRITE_STORAGE</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span>

  <span class="nd">@SuppressLint</span><span class="o">(</span><span class="s">&#34;SetJavaScriptEnabled&#34;</span><span class="o">)</span>
  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_webview</span><span class="o">);</span>

    <span class="c1">// Optional progress bar for page loading progress.
</span><span class="c1"></span>    <span class="n">progress</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">progressBar</span><span class="o">);</span>

    <span class="c1">// Attach our web view to our layout.
</span><span class="c1"></span>    <span class="n">webview</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">webView</span><span class="o">);</span>
    <span class="c1">// Needed to interact with elements on most web pages.
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">getSettings</span><span class="o">().</span><span class="na">setJavaScriptEnabled</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="c1">// This enables pinch to zoom.
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">getSettings</span><span class="o">().</span><span class="na">setBuiltInZoomControls</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="c1">// Do not display the zoom controls on the screen.
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">getSettings</span><span class="o">().</span><span class="na">setDisplayZoomControls</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
    <span class="c1">// Loads a page to fit in the screen (zoomed out).
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">getSettings</span><span class="o">().</span><span class="na">setLoadWithOverviewMode</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="c1">// Do not constrain the viewport to the web view dimensions.
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">getSettings</span><span class="o">().</span><span class="na">setUseWideViewPort</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="c1">// Allow website user settings to be saved and retrieved.
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">getSettings</span><span class="o">().</span><span class="na">setDomStorageEnabled</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="c1">// Attach our web view to our WebViewClient.
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">setWebViewClient</span><span class="o">(</span><span class="k">new</span> <span class="n">MyWebViewClient</span><span class="o">());</span>
    <span class="c1">// We call our url string variable to load.
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">loadUrl</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>

    <span class="c1">// Adds a DownloadListener to our web view. This allows us to click on
</span><span class="c1"></span>    <span class="c1">// download links and have items download to our downloads directory.
</span><span class="c1"></span>    <span class="n">webview</span><span class="o">.</span><span class="na">setDownloadListener</span><span class="o">((</span><span class="n">url</span><span class="o">,</span> <span class="n">userAgent</span><span class="o">,</span> <span class="n">contentDisposition</span><span class="o">,</span> <span class="n">mimetype</span><span class="o">,</span> <span class="n">contentLength</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">String</span> <span class="n">fileName</span> <span class="o">=</span> <span class="n">URLUtil</span><span class="o">.</span><span class="na">guessFileName</span><span class="o">(</span><span class="n">url</span><span class="o">,</span> <span class="n">contentDisposition</span><span class="o">,</span> <span class="kc">null</span><span class="o">);</span>
      <span class="n">String</span> <span class="n">cookie</span> <span class="o">=</span> <span class="n">CookieManager</span><span class="o">.</span><span class="na">getInstance</span><span class="o">().</span><span class="na">getCookie</span><span class="o">(</span><span class="n">url</span><span class="o">);</span>
      <span class="n">DownloadManager</span> <span class="n">dm</span> <span class="o">=</span> <span class="o">(</span><span class="n">DownloadManager</span><span class="o">)</span> <span class="n">getSystemService</span><span class="o">(</span><span class="n">DOWNLOAD_SERVICE</span><span class="o">);</span>
      <span class="n">DownloadManager</span><span class="o">.</span><span class="na">Request</span> <span class="n">request</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DownloadManager</span><span class="o">.</span><span class="na">Request</span><span class="o">(</span><span class="n">Uri</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="n">url</span><span class="o">));</span>
      <span class="n">request</span><span class="o">.</span><span class="na">setAllowedNetworkTypes</span><span class="o">(</span><span class="n">DownloadManager</span><span class="o">.</span><span class="na">Request</span><span class="o">.</span><span class="na">NETWORK_WIFI</span> <span class="o">|</span> <span class="n">DownloadManager</span><span class="o">.</span><span class="na">Request</span><span class="o">.</span><span class="na">NETWORK_MOBILE</span><span class="o">);</span>
      <span class="n">request</span><span class="o">.</span><span class="na">setAllowedOverRoaming</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
      <span class="n">request</span><span class="o">.</span><span class="na">allowScanningByMediaScanner</span><span class="o">();</span>
      <span class="n">request</span><span class="o">.</span><span class="na">setDestinationInExternalPublicDir</span><span class="o">(</span><span class="n">Environment</span><span class="o">.</span><span class="na">DIRECTORY_DOWNLOADS</span><span class="o">,</span> <span class="n">fileName</span><span class="o">);</span>
      <span class="n">request</span><span class="o">.</span><span class="na">addRequestHeader</span><span class="o">(</span><span class="s">&#34;Cookie&#34;</span><span class="o">,</span> <span class="n">cookie</span><span class="o">);</span>
      <span class="n">request</span><span class="o">.</span><span class="na">setNotificationVisibility</span><span class="o">(</span><span class="n">DownloadManager</span><span class="o">.</span><span class="na">Request</span><span class="o">.</span><span class="na">VISIBILITY_VISIBLE_NOTIFY_COMPLETED</span><span class="o">);</span>
      <span class="c1">// Check for storage write permission before attempting to download.
</span><span class="c1"></span>      <span class="k">if</span> <span class="o">(</span><span class="n">getPermission</span><span class="o">()</span> <span class="o">&amp;&amp;</span> <span class="n">dm</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">dm</span><span class="o">.</span><span class="na">enqueue</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">});</span>

  <span class="o">}</span>

  <span class="c1">// Check if storage write permission has been granted. If not, request it.
</span><span class="c1"></span>  <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">getPermission</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">Build</span><span class="o">.</span><span class="na">VERSION</span><span class="o">.</span><span class="na">SDK_INT</span> <span class="o">&gt;=</span> <span class="n">23</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">ActivityCompat</span><span class="o">.</span><span class="na">checkSelfPermission</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">WRITE_EXTERNAL_STORAGE</span><span class="o">)</span> <span class="o">==</span> <span class="n">PackageManager</span><span class="o">.</span><span class="na">PERMISSION_GRANTED</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// True if permission granted exists.
</span><span class="c1"></span>        <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="c1">// We ask for storage write permission if it doesn&#39;t exist.
</span><span class="c1"></span>        <span class="n">ActivityCompat</span><span class="o">.</span><span class="na">requestPermissions</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span><span class="n">Manifest</span><span class="o">.</span><span class="na">permission</span><span class="o">.</span><span class="na">WRITE_EXTERNAL_STORAGE</span><span class="o">},</span> <span class="n">WRITE_STORAGE</span><span class="o">);</span>
        <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
      <span class="o">}</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="c1">// True for SDK &lt; 23
</span><span class="c1"></span>      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="c1">// Check if user granted or denied storage write permission when requested and
</span><span class="c1"></span>  <span class="c1">// run code for either situation. This method is optional, but useful.
</span><span class="c1"></span>  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onRequestPermissionsResult</span><span class="o">(</span><span class="kt">int</span> <span class="n">requestCode</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="n">String</span><span class="o">[]</span> <span class="n">permissions</span><span class="o">,</span> <span class="nd">@NonNull</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">grantResults</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onRequestPermissionsResult</span><span class="o">(</span><span class="n">requestCode</span><span class="o">,</span> <span class="n">permissions</span><span class="o">,</span> <span class="n">grantResults</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">requestCode</span> <span class="o">==</span> <span class="n">WRITE_STORAGE</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">grantResults</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="n">0</span> <span class="o">&amp;&amp;</span> <span class="n">grantResults</span><span class="o">[</span><span class="n">0</span><span class="o">]</span> <span class="o">==</span> <span class="n">PackageManager</span><span class="o">.</span><span class="na">PERMISSION_GRANTED</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">&#34;Permission Granted. Try download again.&#34;</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">getApplicationContext</span><span class="o">(),</span> <span class="s">&#34;Permission Denied! Cannot Download.&#34;</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_LONG</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>

  <span class="c1">// Attach our web view to our WebViewClient.
</span><span class="c1"></span>  <span class="kd">private</span> <span class="kd">class</span> <span class="nc">MyWebViewClient</span> <span class="kd">extends</span> <span class="n">WebViewClient</span> <span class="o">{</span>
    <span class="c1">// This method makes sure that any links we click will open within
</span><span class="c1"></span>    <span class="c1">// our app instead of launching in the default web browser.
</span><span class="c1"></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">shouldOverrideUrlLoading</span><span class="o">(</span><span class="n">WebView</span> <span class="n">view</span><span class="o">,</span> <span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">shouldOverrideUrlLoading</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">url</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Since this method is called every time a new page starts to load, it&#39;s
</span><span class="c1"></span>    <span class="c1">// perfect to run our Progress Bar.
</span><span class="c1"></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onPageStarted</span><span class="o">(</span><span class="n">WebView</span> <span class="n">view</span><span class="o">,</span> <span class="n">String</span> <span class="n">url</span><span class="o">,</span> <span class="n">Bitmap</span> <span class="n">favicon</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">progress</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">VISIBLE</span><span class="o">);</span>
      <span class="kd">super</span><span class="o">.</span><span class="na">onPageStarted</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">url</span><span class="o">,</span> <span class="n">favicon</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// Called whenever a page has finished loading. Here we can end our
</span><span class="c1"></span>    <span class="c1">// page loading progress bar and take it out of view.
</span><span class="c1"></span>    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onPageFinished</span><span class="o">(</span><span class="n">WebView</span> <span class="n">view</span><span class="o">,</span> <span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">progress</span><span class="o">.</span><span class="na">setVisibility</span><span class="o">(</span><span class="n">View</span><span class="o">.</span><span class="na">GONE</span><span class="o">);</span>
      <span class="kd">super</span><span class="o">.</span><span class="na">onPageFinished</span><span class="o">(</span><span class="n">view</span><span class="o">,</span> <span class="n">url</span><span class="o">);</span>
    <span class="o">}</span>

  <span class="o">}</span>

  <span class="c1">// If we have clicked through multiple pages, this allows the back button
</span><span class="c1"></span>  <span class="c1">// to take us back through each page.
</span><span class="c1"></span>  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onBackPressed</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">webview</span><span class="o">.</span><span class="na">canGoBack</span><span class="o">())</span> <span class="o">{</span>
      <span class="n">webview</span><span class="o">.</span><span class="na">goBack</span><span class="o">();</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="kd">super</span><span class="o">.</span><span class="na">onBackPressed</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div></p>
<p>Create a new layout resource file for our WebView called &ldquo;activity_webview.xml&rdquo;.</p>
<p><strong>activity_webview.xml</strong>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span class="nt">&lt;RelativeLayout</span> <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span>
  <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
  <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;WebView</span>
    <span class="na">android:id=</span><span class="s">&#34;@+id/webView&#34;</span>
    <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
    <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;ProgressBar</span>
      <span class="na">android:id=</span><span class="s">&#34;@+id/progressBar&#34;</span>
      <span class="na">style=</span><span class="s">&#34;?android:attr/progressBarStyleHorizontal&#34;</span>
      <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
      <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
      <span class="na">android:indeterminateTint=</span><span class="s">&#34;?attr/colorAccent&#34;</span>
      <span class="na">android:indeterminate=</span><span class="s">&#34;true&#34;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/RelativeLayout&gt;</span></code></pre></div></p>
<p>Now we setup our Buttons with the URLs in the MainActivity class…</p>
<p><strong>MainActivity.java</strong>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="kn">package</span> <span class="nn">com.webviewexample</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">androidx.appcompat.app.AppCompatActivity</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">android.content.Intent</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.os.Bundle</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">android.widget.Button</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MainActivity</span> <span class="kd">extends</span> <span class="n">AppCompatActivity</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="n">Bundle</span> <span class="n">savedInstanceState</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="o">);</span>
    <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">layout</span><span class="o">.</span><span class="na">activity_main</span><span class="o">);</span>

    <span class="c1">// This button will pass the Google website url to MyWebView.class
</span><span class="c1"></span>    <span class="n">Button</span> <span class="n">gbtn</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">googleButton</span><span class="o">);</span>
    <span class="n">gbtn</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">view</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">MyWebView</span><span class="o">.</span><span class="na">url</span> <span class="o">=</span> <span class="s">&#34;https://www.google.com/&#34;</span><span class="o">;</span>
      <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">MyWebView</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="o">});</span>

    <span class="c1">// This button will pass the techStop website url to MyWebView.class
</span><span class="c1"></span>    <span class="n">Button</span> <span class="n">tsbtn</span> <span class="o">=</span> <span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="na">id</span><span class="o">.</span><span class="na">tsButton</span><span class="o">);</span>
    <span class="n">tsbtn</span><span class="o">.</span><span class="na">setOnClickListener</span><span class="o">(</span><span class="n">view</span> <span class="o">-&gt;</span> <span class="o">{</span>
      <span class="n">MyWebView</span><span class="o">.</span><span class="na">url</span> <span class="o">=</span> <span class="s">&#34;https://techstop.github.io/&#34;</span><span class="o">;</span>
      <span class="n">Intent</span> <span class="n">intent</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Intent</span><span class="o">(</span><span class="n">MainActivity</span><span class="o">.</span><span class="na">this</span><span class="o">,</span> <span class="n">MyWebView</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
      <span class="n">startActivity</span><span class="o">(</span><span class="n">intent</span><span class="o">);</span>
    <span class="o">});</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre></div></p>
<p>We now need to add the buttons to the MainActivity layout…</p>
<p><strong>activity_main.xml</strong>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span>
  <span class="na">xmlns:tools=</span><span class="s">&#34;http://schemas.android.com/tools&#34;</span>
  <span class="na">android:layout_width=</span><span class="s">&#34;match_parent&#34;</span>
  <span class="na">android:layout_height=</span><span class="s">&#34;match_parent&#34;</span>
  <span class="na">android:gravity=</span><span class="s">&#34;center&#34;</span>
  <span class="na">android:orientation=</span><span class="s">&#34;vertical&#34;</span>
  <span class="na">tools:context=</span><span class="s">&#34;.MainActivity&#34;</span><span class="nt">&gt;</span>

  <span class="nt">&lt;Button</span>
    <span class="na">android:layout_width=</span><span class="s">&#34;wrap_content&#34;</span>
    <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
    <span class="na">android:id=</span><span class="s">&#34;@+id/googleButton&#34;</span>
    <span class="na">android:text=</span><span class="s">&#34;@string/google&#34;</span> <span class="nt">/&gt;</span>

  <span class="nt">&lt;Button</span>
    <span class="na">android:layout_width=</span><span class="s">&#34;wrap_content&#34;</span>
    <span class="na">android:layout_height=</span><span class="s">&#34;wrap_content&#34;</span>
    <span class="na">android:id=</span><span class="s">&#34;@+id/tsButton&#34;</span>
    <span class="na">android:text=</span><span class="s">&#34;@string/tech_Stop&#34;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span></code></pre></div></p>
<p>We&rsquo;re almost done! Lets add the strings we need…</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block; text-align:center;"
     data-ad-layout="in-article"
     data-ad-format="fluid"
     data-ad-client="ca-pub-8645513020646755"
     data-ad-slot="8847978337"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<p><strong>strings.xml</strong>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;resources&gt;</span>
  <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&#34;app_name&#34;</span><span class="nt">&gt;</span>WebView Example<span class="nt">&lt;/string&gt;</span>
  <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&#34;google&#34;</span><span class="nt">&gt;</span>GOOGLE<span class="nt">&lt;/string&gt;</span>
  <span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">&#34;tech_Stop&#34;</span><span class="nt">&gt;</span>techStop<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;/resources&gt;</span></code></pre></div></p>
<p>Finally we add MyWebView activity and necessary permissions to the Android Manifest.</p>
<p><strong>AndroidManifest.xml</strong>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
<span class="nt">&lt;manifest</span> <span class="na">xmlns:android=</span><span class="s">&#34;http://schemas.android.com/apk/res/android&#34;</span>
    <span class="na">xmlns:tools=</span><span class="s">&#34;http://schemas.android.com/tools&#34;</span>
    <span class="na">package=</span><span class="s">&#34;com.webviewexample&#34;</span><span class="nt">&gt;</span>

    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.INTERNET&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.ACCESS_NETWORK_STATE&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.WRITE_EXTERNAL_STORAGE&#34;</span>
        <span class="na">tools:ignore=</span><span class="s">&#34;ScopedStorage&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;uses-permission</span> <span class="na">android:name=</span><span class="s">&#34;android.permission.ACCESS_DOWNLOAD_MANAGER&#34;</span> <span class="nt">/&gt;</span>

    <span class="nt">&lt;application</span>
        <span class="na">android:allowBackup=</span><span class="s">&#34;true&#34;</span>
        <span class="na">android:icon=</span><span class="s">&#34;@mipmap/ic_launcher&#34;</span>
        <span class="na">android:label=</span><span class="s">&#34;@string/app_name&#34;</span>
        <span class="na">android:roundIcon=</span><span class="s">&#34;@mipmap/ic_launcher_round&#34;</span>
        <span class="na">android:theme=</span><span class="s">&#34;@style/AppTheme&#34;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">&#34;.MainActivity&#34;</span>
            <span class="na">android:exported=</span><span class="s">&#34;true&#34;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;intent-filter&gt;</span>
                <span class="nt">&lt;action</span> <span class="na">android:name=</span><span class="s">&#34;android.intent.action.MAIN&#34;</span> <span class="nt">/&gt;</span>

                <span class="nt">&lt;category</span> <span class="na">android:name=</span><span class="s">&#34;android.intent.category.LAUNCHER&#34;</span> <span class="nt">/&gt;</span>
            <span class="nt">&lt;/intent-filter&gt;</span>
        <span class="nt">&lt;/activity&gt;</span>
        <span class="nt">&lt;activity</span> <span class="na">android:name=</span><span class="s">&#34;.MyWebView&#34;</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;/application&gt;</span>
<span class="nt">&lt;/manifest&gt;</span></code></pre></div></p>
<p>This will conclude the Android WebView tutorial. The full project is on github. You can download or fork it from the link below and import it to your favorite IDE, though Android Studio is recommended.</p>
<div>
  <a title="Android WebView" href="https://github.com/GameTheory-/android-webview" target="_blank">
  <button id="cta-btn"><i class="fa fa-download"></i> Android WebView</button>
  </a>
</div>
    <ul class="share-buttons">
    <li>Share this article:</li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2ftechstop.github.io%2fandroid-webview%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook"></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Android%20WebView&amp;url=https%3a%2f%2ftechstop.github.io%2fandroid-webview%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Tweet this article"></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=https%3a%2f%2ftechstop.github.io%2fandroid-webview%2f&title=Android%20WebView" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title="Share on Linkedin"></a>
    </li>
</ul>

    
      Tags:
      
        <a href="https://techstop.github.io/tags/android-studio">android studio</a>, 
      
        <a href="https://techstop.github.io/tags/app-development">app development</a>, 
      
        <a href="https://techstop.github.io/tags/java">java</a>, 
      
        <a href="https://techstop.github.io/tags/tutorials">tutorials</a>, 
      
        <a href="https://techstop.github.io/tags/android">android</a>
      
    
    <div style="margin-top: 18px; text-align: center;">
      
        <span>&middot; <strong>More Articles</strong> &middot;</span>
      
      
        <div><a href="https://techstop.github.io/admob-tutorial/">&laquo; Admob Tutorial</a></div>
      
      
        <div><a href="https://techstop.github.io/android-toolbar/">Android Toolbar &raquo;</a></div>
      
    </div>
  </article>
  <hr>
  
    <h3><a style="cursor: pointer;" onclick="loadComm()">Show Comments &#x1f5e8;</a></h3>
<div id="comment_form_wrapper" style="display: none;">
<script id="myScriptId" src="https://utteranc.es/client.js"
        repo="techstop/techstop"
        issue-term="title"
        label="comments"
        theme="github-dark"
        crossorigin="anonymous"
        async>
</script>
</div>
<script>
  function loadComm() {
    $('#comment_form_wrapper').toggle();
  }
</script>

  
  <style>
.highlight {
  position: relative;
}
.highlight-copy-btn {
  position: absolute;
  right: 0;
  top: -17px;
  border-radius: 4px;
  border: none;
  font-size: 9px;
  line-height: 14px;
  color: #ffffff;
  background-color: #111111;
  min-width: 55px;
  text-align: center;
}
.highlight-copy-btn:hover {
  background-color: #444444;
}
.highlight-copy-btn:focus {
  outline: 0;
}
</style>
<script>
(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "Copy";
    }, 2000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn";
    copyBtn.textContent = "Copy";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();

        flashCopyMessage(copyBtn, 'Copied!')
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed!')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>


        </div>
      </main>
    </div>
    <script>
const myScript = document.getElementById('myScriptId');
const toggleSwitch = document.querySelector('.theme-switch input[type="checkbox"]');
const currentTheme = localStorage.getItem('theme');

if (currentTheme) {
  document.documentElement.setAttribute('data-theme', currentTheme);
  if (currentTheme === 'light') {
      toggleSwitch.checked = true;
      
        myScript.setAttribute('theme', 'github-light');
      
  }
}

toggleSwitch.addEventListener('change', switchTheme, false);

function switchTheme(e) {
  if (e.target.checked) {
    document.documentElement.setAttribute('data-theme', 'light');
    localStorage.setItem('theme', 'light');
    
      window.location.reload(true)
    
  } else {
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('theme', 'dark');
    
      window.location.reload(true)
    
  }
}
</script>
<style>
  .font-row-one {
    font-size: 16px;
    padding-top: 2px;
  }
  .font-row-two {
    font-size: 12px;
  }
</style>
<footer class="main-footer">
  <div class="container clearfix">
    <a class="icon-rss" href="https://techstop.github.io/post/index.xml" title="RSS" target="_blank"></a>
    <div class="font-row-one">&copy; 2019 &#8208; 2022 &middot; <a href="https://techstop.github.io/">techStop</a></div>
    <div><a href="https://techstop.github.io/about/" class="font-row-two">About</a> &middot; <a href="https://techstop.github.io/sitemap.xml" class="font-row-two">Sitemap</a> &middot; <a href="https://techstop.github.io/privacy-policy/" class="font-row-two">Privacy Policy</a></div>
  </div>
  <script src="https://techstop.github.io/bundle.min.55437212d8cad12a151d7e1d1e4ee22bd8ac91361f95a90fbed1bde1e54fcbd1.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <script>window.jQuery || document.write('<script src="https:\/\/techstop.github.io\/$jquery"><\/script>')</script>
  <script src="https://techstop.github.io/js/plugins.js"></script>
</footer>
</body>
</html>
